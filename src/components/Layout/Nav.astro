---
// src/components/Nav.astro
import KaplanLogo from "../../../src/images/Asset 6.svg";
import FavoritesIcon from "../Misc/FavoritesIcon";
---
<nav class="bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700" role="navigation"
		 aria-label="Main navigation">
	<div class="max-w-screen-xl mx-auto px-4 py-4 flex items-center justify-between">
		<!-- Logo -->
		<a href="/" class="flex items-center space-x-3">
			<img src={KaplanLogo.src} class="h-16" alt="Kaplan Collection Logo" />
			<span class="sr-only">Kaplan Collection Home</span>
		</a>

		<!-- Right Side: Nav, Favorites, Hamburger -->
		<div class="flex items-center space-x-6">
			<!-- Desktop Nav -->
			<ul class="hidden md:flex items-center space-x-6 text-sm font-medium text-gray-800 dark:text-gray-100">
				<li>
					<a href="/"
						 class="text-gray-800 dark:text-gray-100 hover:underline hover:decoration-indigo-500 hover:underline-offset-4 transition-colors duration-200 focus:outline-none focus-visible:ring focus-visible:ring-indigo-400">Home</a>
				</li>
				<li class="relative">
					<div class="group inline-block relative">
						<button
							id="dropdownNavbarLink"
							aria-haspopup="true"
							aria-expanded="false"
							class="flex items-center gap-1 py-2 hover:underline hover:decoration-indigo-500 hover:underline-offset-4 transition-colors focus:outline-none focus-visible:ring"
						>
							About
							<svg class="w-2.5 h-2.5" fill="none" viewBox="0 0 10 6" xmlns="http://www.w3.org/2000/svg">
								<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
											d="m1 1 4 4 4-4" />
							</svg>
						</button>

						<div
							id="dropdownNavbar"
							class="absolute left-0 z-50 hidden group-hover:block bg-white divide-y divide-gray-100 rounded-lg shadow w-56 dark:bg-gray-700 dark:divide-gray-600"
							role="menu"
							aria-label="About links"
						>
							<ul class="py-2 text-sm text-gray-700 dark:text-gray-400">
								<li>
									<a href="/about/aboutthecollection" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">About
										the Kaplan Collection</a>
								</li>
								<li>
									<a href="/about/processingthecollection"
										 class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">Processing the Collection</a>
								</li>
								<li>
									<a href="/about/ai" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">Using AI</a>
								</li>
							</ul>
						</div>
					</div>
				</li>
				<li><a href="/search"
							 class="text-gray-800 dark:text-gray-100 hover:underline hover:decoration-indigo-500 hover:underline-offset-4 transition-colors duration-200 focus:outline-none focus-visible:ring focus-visible:ring-indigo-400">Search</a>
				</li>
				<li><a href="/subcollections"
							 class="text-gray-800 dark:text-gray-100 hover:underline hover:decoration-indigo-500 hover:underline-offset-4 transition-colors duration-200 focus:outline-none focus-visible:ring focus-visible:ring-indigo-400">Subcollections</a>
				</li>
				<li><a href="/help"
							 class="text-gray-800 dark:text-gray-100 hover:underline hover:decoration-indigo-500 hover:underline-offset-4 transition-colors duration-200 focus:outline-none focus-visible:ring focus-visible:ring-indigo-400">Help</a>
				</li>
			</ul>

			<!-- Favorites Icon -->
			<a href="/favorites" aria-label="View Favorites"
				 class="focus:outline-none focus-visible:ring focus-visible:ring-indigo-400">
				<FavoritesIcon client:only="react" />
			</a>

			<!-- Hamburger Button -->
			<button
				id="hamburger"
				type="button"
				class="md:hidden text-gray-600 dark:text-gray-200 focus:outline-none focus-visible:ring focus-visible:ring-indigo-400"
				aria-label="Toggle menu"
				aria-controls="mobile-menu"
				aria-expanded="false"
				onclick="toggleMobileMenu();"
			>
				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
				</svg>
			</button>
		</div>
	</div>

	<!-- Mobile Navigation -->
	<div id="mobile-menu" class="hidden md:hidden px-4 pb-4 text-gray-800 dark:text-gray-100 bg-white dark:bg-gray-900">
		<ul class="flex flex-col gap-3 text-sm">
			<li><a href="/"
						 class="block py-2 hover:text-indigo-700 dark:hover:text-indigo-400 focus:outline-none focus-visible:ring">Home</a>
			</li>
			<li>
				<button
					id="dropdownNavbarLinkMobile"
					aria-haspopup="true"
					aria-expanded="false"
					onclick="toggleMobileAboutMenu();"
					class="flex items-center gap-1 py-2 hover:text-teal-700 dark:hover:text-teal-400 focus:outline-none focus-visible:ring"
				>
					About
					<svg class="w-2.5 h-2.5" fill="none" viewBox="0 0 10 6" xmlns="http://www.w3.org/2000/svg">
						<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
									d="m1 1 4 4 4-4" />
					</svg>
				</button>
				<div id="dropdownNavbarMobile"
						 class="mt-2 hidden bg-white dark:bg-gray-700 divide-y divide-gray-100 dark:divide-gray-600 rounded-lg shadow w-56"
						 role="menu" aria-label="About links">
					<ul class="py-2 text-sm text-gray-700 dark:text-gray-400">
						<li><a href="/about/aboutthecollection" role="menuitem"
									 class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">About the Kaplan Collection</a></li>
						<li><a href="/about/processingthecollection" role="menuitem"
									 class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">Processing the Collection</a></li>
						<li><a href="/about/ai" role="menuitem" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">Using
							AI</a></li>
					</ul>
				</div>
			</li>
			<li><a href="/search"
						 class="block py-2 hover:text-indigo-700 dark:hover:text-indigo-400 focus:outline-none focus-visible:ring">Search</a>
			</li>
			<li><a href="/subcollections"
						 class="block py-2 hover:text-indigo-700 dark:hover:text-indigo-400 focus:outline-none focus-visible:ring">Subcollections</a>
			</li>
			<li><a href="/help"
						 class="block py-2 hover:text-indigo-700 dark:hover:text-indigo-400 focus:outline-none focus-visible:ring">Help</a>
			</li>
		</ul>
	</div>

	<!-- Scripts -->
	<script>
		document.addEventListener("DOMContentLoaded", () => {
			const mobileMenu = document.getElementById("mobile-menu");
			const hamburger = document.getElementById("hamburger");
			const aboutMenu = document.getElementById("dropdownNavbarMobile");
			const aboutButton = document.getElementById("dropdownNavbarLinkMobile");

			if (hamburger && mobileMenu) {
				hamburger.addEventListener("click", () => {
					const isHidden = mobileMenu.classList.contains("hidden");
					mobileMenu.classList.toggle("hidden");
					hamburger.setAttribute("aria-expanded", String(isHidden));
				});
			}

			if (aboutButton && aboutMenu) {
				aboutButton.addEventListener("click", () => {
					const isHidden = aboutMenu.classList.contains("hidden");
					aboutMenu.classList.toggle("hidden");
					aboutButton.setAttribute("aria-expanded", String(isHidden));
				});
			}
		});
	</script>
</nav>